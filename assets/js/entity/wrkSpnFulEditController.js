//
// Source code generated by Celerio, a Jaxio product.
// Documentation: http://www.jaxio.com/documentation/celerio/
// Follow us on twitter: @jaxiosoft
// Need commercial support ? Contact us: info@jaxio.com
// Template pack-custom:angularjs/assets/js/entity/EntityEditController.e.vm.js
//

													
																	
																	
						
						
app.controller("WrkSpnFulEditController", ["$scope", "$window", "$aside", 
"$log", "WrkSpnFulRestService", 
		"WrkSpnFulRestInvRelationService", "$alert", "$timeout", "item", "mode", function(scope, window, aside, log, 
		wrkSpnFulRestService, 
					wrkSpnFulRestInvRelationService, alertService, timeoutService, item, mode) {
	
	log.info("inside WrkSpnFulEditController, mode: " + mode);
	log.info("inside WrkSpnFulEditController, item: " + item);
	scope.mode = mode;
	scope.item = item;

				

	/** Clear item */
	scope.clear = function () {
			scope.item = null;
	};
	
	/** Creates or updates an item */
	scope.saveItem = function() {
		log.info("Creating or updating an item");
		
		// defines the success behavior inside a methode
		var onSaveSuccess = function success(data) {
			console.log('success, got data: ', data);
		
			window.showAlert = function(){
				
				var userALert = alertService({
		                    title: "SUCCESS:",
		                    content: '<BR>Your wrkSpnFul have been <i>created or updated</i>. You can find it int the result table. See <a href="#"><B>older messages</B></a> !',
		                    placement: "top-right",
		                    type: "theme",
		                    container: ".alert-container-top-right",
		                    show: !1,
		                    animation: "mat-grow-top-right"
		                    });
		    
				timeoutService(function() {
					userALert.show()
		        	}, 1 /* timeout duration */);
			};
			
			window.showAlert();
			};
		
			// defines the error behavior inside a methode
			var onSaveError = function (result) {
				window.showAlert = function(){
					var userALert = alertService({
			                    title: "ERROR:",
			                    content: "<BR>Your wrkSpnFul haven't been created. Try again !",
			                    placement: "top-right",
			                    type: "theme",
			                    container: ".alert-container-top-right",
			                    show: !1,
			                    animation: "mat-grow-top-right"
			                    });
			    
					timeoutService(function() {
						userALert.show()
			        	}, 1 /* timeout duration */);
				};
				window.showAlert();
			};
		
		if (scope.item.id != null) {
			// update mode
			console.log("update mode");
																		scope.item.wrkAppCde = scope.item.id.wrkAppCde;
																				scope.item.wrkDfuDte = scope.item.id.wrkDfuDte;
																				scope.item.wrkSpnIde = scope.item.id.wrkSpnIde;
															wrkSpnFulRestService.update(scope.item, onSaveSuccess, onSaveError);
		} else {
			// creation mode
			console.log("creation mode");
			wrkSpnFulRestService.save(scope.item, onSaveSuccess, onSaveError);
		}
	};

	/** Removes one item or a list of items (selected ones) */
	scope.remove = function(item) {
		
		var r = confirm("Are you sure ?");
		if (r == true) {
			if (item) {				
				// one item deletion mode
																			console.log("cpk: " + item.id.wrkAppCde);
											console.log("cpk: " + item.id.wrkDfuDte);
											console.log("cpk: " + item.id.wrkSpnIde);
													wrkSpnFulRestService.delete({wrkSpnIde: item.id.wrkSpnIde, wrkAppCde: item.id.wrkAppCde, wrkDfuDte: item.id.wrkDfuDte}, function success(data) {
					scope.clear();
					alert('item deleted');
				}, function failure(err) {
					alert('request failed');
				});
			}	
		}
	};

}]);
